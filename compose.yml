name: myservices
x-podman:
  in_pod: false
services:
  ssh:
    image: lscr.io/linuxserver/openssh-server:version-10.0_p1-r7@sha256:d32caf5bd3bc68bad4a30716638929e345d015cc0cfe6692a3f99015c288e23b
    pull_policy: always
    environment:
      - PUID=${COMPOSE_PUID:-1000}
      - PGID=${COMPOSE_PGID:-1000}
      - TZ=${COMPOSE_TZ:-Etc/UTC}
      - PASSWORD_ACCESS=false
      - SUDO_ACCESS=false
      - USER_NAME=${COMPOSE_SSH_USERNAME:-sshuser}
    ports:
      - 2222:2222
    restart: unless-stopped
  nix:
    image: docker.io/nixos/nix:2.33.2@sha256:c6ebd12d96b3374ee15e3986c15aa43f5e49310634f17afcaaf4dafe4f6732b2
    pull_policy: always
    volumes:
      - ${NIX_CONFIG_PATH:-.}:/config:Z
    user: "${UID:-1000}:${GID:-1000}"
    userns_mode: keep-id
    working_dir: /config
    entrypoint: /bin/sh -c
    command: sh
  renovate:
    image: docker.io/renovate/renovate:42.97@sha256:34607ebef3d18959d2f6b297204c72c2269f85555631eaed80ca67f01539c21a
    pull_policy: always
    environment:
      - RENOVATE_AUTODISCOVER=${RENOVATE_AUTODISCOVER:-false}
    env_file:
      - path: ${COMPOSE_ENV_PATH}
        required: false
    user: "${UID:-1000}:${GID:-1000}"
    userns_mode: keep-id
  searxng:
    image: docker.io/searxng/searxng:2026.1.11-cf74e1d9e@sha256:35e3520e53621e22566330d876d2a36e4a556628b6567bf2706ceb211c6d9c07
    pull_policy: always
    restart: unless-stopped
    ports:
      - 8888:8080
  dev:
    image: quay.io/michaelvaldron/dev:1.0.0@sha256:461a889bc5d212dca59f0c9f65fd1d0509e4a31266a49deef0eea282c8794649
    pull_policy: always
    userns_mode: keep-id:uid=1000,gid=1000
    volumes:
      - ${PWD}:/project:Z
  ollama:
    image: docker.io/ollama/ollama:0.15.6@sha256:5f7a20da9b4d42d1909b4693f90942135bcabc335ee42d529c0d143c44a92311
    pull_policy: always
    restart: unless-stopped
    user: "1000:1000"
    userns_mode: keep-id:uid=1000,gid=1000
    volumes:
      - ${HOME}/.ollama:/home/ubuntu/.ollama:Z
    ports:
      - 11434:11434
  open-webui:
    image: ghcr.io/open-webui/open-webui:v0.7.2@sha256:16d9a3615b45f14a0c89f7ad7a3bf151f923ed32c2e68f9204eb17d1ce40774b
    pull_policy: always
    restart: unless-stopped
    environment:
      - WEBUI_AUTH=False
    volumes:
      - ${HOME}/.open-webui:/app/backend/data:Z
    ports:
      - 3002:8080
